Глава 2
TCP, сканеры, прокси.

Начинается с напоминания, как отвечают порты на запрос syn
Если открыт - syn ->, <- syn-ack, ack -> (Что-то, что прослушивает этот порт, ответило на приглашение установить tcp соединение)
Если закрыт - syn ->, <- rst (Соединение сбрасывается, так как порт не прослушивается)
Если syn -> и в ответ ничего не приходит - скорее всего, брэндмаэр блокирует запросы (или ответы), поэтому нет ясности, слушает что-то порт или нет

Обход брэндмауэра с помощью переадресации (прокси)
В некоторых случаях можно обходить ограничения брэндмауэра
  Пример:
      С рабочего места нельзя заходить на сайты, связанные с криптой, настройки брэндмауэра не позволяют.
      Если у вас есть внешняя система, к которой доступ не ограничен, то можно там поднять прокси, и с рабочего места через этот прокси без проблем ходить на сайты

@hatn9g: Может работать и в другую сторону, если есть пул прокси, то можно, например, перебирать пароли, сканить сайт, хост, чередуя прокси, обходя простые защиты антифлуда\перебора


Далее в главе последовательно рассказывают, как написать простой сканер портов, с использованием многопоточности
Меньше 50 строк, а позволяет отсканить все порты на хосте за достаточно небольшое время
Не стал упарываться слишком сильно, превращая в реальный и функциональный инструмент.
https://github.com/Pechenka-ovsynka/bhg_my/tree/main/chp2/src/scan

Далее в главе знакомят с принципом работы серверных приложений, начиная с простого echo сервера, показывая несколько вариантов реализации переноса данных из потока input в output. Интересно, вариант с bufio понравился больше всего.
https://github.com/Pechenka-ovsynka/bhg_my/tree/main/chp2/src/echo

Немного сложно было было с написанием прокси для tcp, но тут просто забыл копировать ответ от конечного эндпоинта. Прокси - слишком громкое название, скорее "перекидываем запрос к определённой точке через посредника". Не получилось нормально через браузер заходить через прокси на яндекс или гугл (HTTP Error 406, 404), но не стал слишком долго сидеть на этом
https://github.com/Pechenka-ovsynka/bhg_my/tree/main/chp2/src/proxy_tcp

В конце главы предлагается написать небольшую "дыру в безопасности". Не стал писать, но суть полностью понятна: прослушивать порт, жестко привязать поток ввода и вывода с порта к bin/sh (как пример). Типичный reverse shell, хотя авторы не говорят это :D